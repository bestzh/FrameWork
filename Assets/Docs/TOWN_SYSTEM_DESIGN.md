# åŸé•‡ç³»ç»Ÿè¯¦ç»†è®¾è®¡

## ğŸ›ï¸ åŸé•‡ç»“æ„è®¾è®¡

### åŸé•‡å¸ƒå±€ï¼ˆä¿¯è§†å›¾ï¼‰

```
        [åŒ—]
         |
    [æŠ€èƒ½å¯¼å¸ˆ]
         |
[è£…å¤‡å•†åº—] - [ä¸­å¤®å¹¿åœº] - [å¼ºåŒ–å·¥åŠ]
         |        |           |
    [ä¼ é€é—¨]  [ç©å®¶å‡ºç”Ÿç‚¹]  [ä»“åº“]
         |        |           |
    [é…’é¦†] - [ä»»åŠ¡NPC] - [å…¬å‘Šæ¿]
         |
        [å—]
```

### åœºæ™¯å°ºå¯¸
- **åŸé•‡å¤§å°ï¼š** 50m Ã— 50m
- **å»ºç­‘æ•°é‡ï¼š** 6ä¸ªä¸»è¦å»ºç­‘
- **NPCæ•°é‡ï¼š** 8-10ä¸ªNPC
- **äº¤äº’ç‚¹ï¼š** ä¼ é€é—¨ã€å•†åº—ã€NPC

---

## ğŸ‘¥ NPCç³»ç»Ÿè®¾è®¡

### NPCç±»å‹

#### 1. ä»»åŠ¡NPCï¼ˆä¸­å¤®å¹¿åœºï¼‰
- **åç§°ï¼š** å†’é™©è€…åä¼šä¼šé•¿
- **åŠŸèƒ½ï¼š** æ¥å–ä»»åŠ¡ã€æŸ¥çœ‹ä»»åŠ¡è¿›åº¦
- **å¯¹è¯ï¼š** ä»»åŠ¡ç›¸å…³å¯¹è¯
- **ä½ç½®ï¼š** ä¸­å¤®å¹¿åœºä¸­å¿ƒ

#### 2. è£…å¤‡å•†åº—NPCï¼ˆè£…å¤‡å•†åº—ï¼‰
- **åç§°ï¼š** é“åŒ Â·å²å¯†æ–¯
- **åŠŸèƒ½ï¼š** è´­ä¹°è£…å¤‡ã€å‡ºå”®è£…å¤‡
- **å¯¹è¯ï¼š** è£…å¤‡ç›¸å…³å¯¹è¯
- **ä½ç½®ï¼š** è£…å¤‡å•†åº—å†…

#### 3. æŠ€èƒ½å¯¼å¸ˆï¼ˆæŠ€èƒ½å¯¼å¸ˆå¤„ï¼‰
- **åç§°ï¼š** é­”æ³•å¯¼å¸ˆÂ·è‰¾è‰
- **åŠŸèƒ½ï¼š** å­¦ä¹ æŠ€èƒ½ã€å‡çº§æŠ€èƒ½
- **å¯¹è¯ï¼š** æŠ€èƒ½ç›¸å…³å¯¹è¯
- **ä½ç½®ï¼š** æŠ€èƒ½å¯¼å¸ˆå¤„

#### 4. å¼ºåŒ–å¸ˆï¼ˆå¼ºåŒ–å·¥åŠï¼‰
- **åç§°ï¼š** å¼ºåŒ–å¤§å¸ˆÂ·é›·å…‹æ–¯
- **åŠŸèƒ½ï¼š** è£…å¤‡å¼ºåŒ–ã€è£…å¤‡é™„é­”
- **å¯¹è¯ï¼š** å¼ºåŒ–ç›¸å…³å¯¹è¯
- **ä½ç½®ï¼š** å¼ºåŒ–å·¥åŠå†…

#### 5. ä»“åº“ç®¡ç†å‘˜ï¼ˆä»“åº“ï¼‰
- **åç§°ï¼š** ä»“åº“ç®¡ç†å‘˜Â·æ±¤å§†
- **åŠŸèƒ½ï¼š** å­˜å‚¨è£…å¤‡ã€é“å…·
- **å¯¹è¯ï¼š** ä»“åº“ç›¸å…³å¯¹è¯
- **ä½ç½®ï¼š** ä»“åº“å†…

#### 6. é…’é¦†è€æ¿ï¼ˆé…’é¦†ï¼‰
- **åç§°ï¼š** é…’é¦†è€æ¿Â·æ°å…‹
- **åŠŸèƒ½ï¼š** æŸ¥çœ‹æ’è¡Œæ¦œï¼ˆå¯é€‰ï¼‰ã€ä¼‘æ¯
- **å¯¹è¯ï¼š** é—²èŠå¯¹è¯
- **ä½ç½®ï¼š** é…’é¦†å†…

### NPCæ•°æ®ç»“æ„

```csharp
public class NPCData
{
    public int NPCId;                // NPC ID
    public string NPCName;          // NPCåç§°
    public NPCType Type;            // NPCç±»å‹
    public Vector3 Position;         // ä½ç½®
    public string DialogueText;     // å¯¹è¯æ–‡æœ¬
    public List<NPCAction> Actions; // å¯æ‰§è¡Œçš„æ“ä½œ
}

public enum NPCType
{
    Quest,      // ä»»åŠ¡NPC
    Shop,       // å•†åº—NPC
    Skill,      // æŠ€èƒ½NPC
    Enhance,    // å¼ºåŒ–NPC
    Storage,    // ä»“åº“NPC
    Tavern      // é…’é¦†NPC
}

public class NPCAction
{
    public string ActionName;       // æ“ä½œåç§°
    public ActionType Type;         // æ“ä½œç±»å‹
    public System.Action OnClick;   // ç‚¹å‡»å›è°ƒ
}

public enum ActionType
{
    Dialogue,   // å¯¹è¯
    Shop,       // æ‰“å¼€å•†åº—
    SkillTree,  // æ‰“å¼€æŠ€èƒ½æ ‘
    Enhance,    // æ‰“å¼€å¼ºåŒ–ç•Œé¢
    Storage,    // æ‰“å¼€ä»“åº“
    Quest       // æ‰“å¼€ä»»åŠ¡ç•Œé¢
}
```

---

## ğŸšª ä¼ é€é—¨ç³»ç»Ÿè®¾è®¡

### ä¼ é€é—¨ä½ç½®
- **ä½ç½®ï¼š** ä¸­å¤®å¹¿åœºä¸­å¿ƒ
- **å¤–è§‚ï¼š** é­”æ³•ä¼ é€é—¨ï¼ˆç‰¹æ•ˆï¼‰
- **äº¤äº’ï¼š** é è¿‘åæŒ‰Eé”®æ‰“å¼€å‰¯æœ¬é€‰æ‹©ç•Œé¢

### ä¼ é€é—¨UIè®¾è®¡

#### å‰¯æœ¬é€‰æ‹©ç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰¯æœ¬é€‰æ‹©                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æš—å½±æ£®æ—] [ç«ç„°æ´ç©´] [å†°éœœç¥æ®¿]    â”‚
â”‚  [é›·ç”µé«˜å¡”] [æš—å½±ç‹åº§]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰¯æœ¬è¯¦æƒ…ï¼š                           â”‚
â”‚  åç§°ï¼šæš—å½±æ£®æ—                      â”‚
â”‚  éš¾åº¦ï¼šæ™®é€š                          â”‚
â”‚  æ¨èç­‰çº§ï¼š1-5çº§                     â”‚
â”‚  æˆ¿é—´æ•°ï¼š5                           â”‚
â”‚  å¥–åŠ±ï¼šç»éªŒ500ï¼Œé‡‘å¸200              â”‚
â”‚  çŠ¶æ€ï¼šå·²è§£é” âœ“                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è¿›å…¥å‰¯æœ¬]  [è¿”å›]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼ é€é—¨æ•°æ®ç»“æ„

```csharp
public class PortalData
{
    public int PortalId;            // ä¼ é€é—¨ID
    public Vector3 Position;        // ä½ç½®
    public List<DungeonInfo> Dungeons; // å¯ç”¨å‰¯æœ¬åˆ—è¡¨
}

public class DungeonInfo
{
    public int DungeonId;           // å‰¯æœ¬ID
    public string DungeonName;      // å‰¯æœ¬åç§°
    public DungeonDifficulty Difficulty; // éš¾åº¦
    public int RecommendedLevel;     // æ¨èç­‰çº§
    public int RoomCount;            // æˆ¿é—´æ•°
    public bool IsUnlocked;         // æ˜¯å¦è§£é”
    public string SceneName;         // åœºæ™¯åç§°
}
```

---

## ğŸ’¬ å¯¹è¯ç³»ç»Ÿè®¾è®¡

### å¯¹è¯UIè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [NPCå¤´åƒ]  é“åŒ Â·å²å¯†æ–¯              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  æ¬¢è¿æ¥åˆ°æˆ‘çš„å•†åº—ï¼                  â”‚
â”‚  è¿™é‡Œæœ‰æœ€å¥½çš„è£…å¤‡ï¼                  â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è´­ä¹°è£…å¤‡]  [å‡ºå”®è£…å¤‡]  [ç¦»å¼€]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¹è¯æ•°æ®ç»“æ„

```csharp
public class DialogueData
{
    public int DialogueId;          // å¯¹è¯ID
    public int NPCId;               // NPC ID
    public string DialogueText;     // å¯¹è¯æ–‡æœ¬
    public List<DialogueOption> Options; // å¯¹è¯é€‰é¡¹
}

public class DialogueOption
{
    public string OptionText;        // é€‰é¡¹æ–‡æœ¬
    public int NextDialogueId;      // ä¸‹ä¸€ä¸ªå¯¹è¯ID
    public DialogueAction Action;    // å¯¹è¯åŠ¨ä½œ
}

public enum DialogueAction
{
    None,           // æ— åŠ¨ä½œ
    OpenShop,       // æ‰“å¼€å•†åº—
    OpenSkillTree,  // æ‰“å¼€æŠ€èƒ½æ ‘
    OpenEnhance,    // æ‰“å¼€å¼ºåŒ–ç•Œé¢
    OpenStorage,    // æ‰“å¼€ä»“åº“
    AcceptQuest,    // æ¥å–ä»»åŠ¡
    CompleteQuest   // å®Œæˆä»»åŠ¡
}
```

---

## ğŸª å•†åº—ç³»ç»Ÿè®¾è®¡

### å•†åº—UIè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è£…å¤‡å•†åº— - é“åŒ Â·å²å¯†æ–¯              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å•†å“åˆ—è¡¨ï¼š                           â”‚
â”‚  [æ­¦å™¨] [é˜²å…·] [é¥°å“] [æ¶ˆè€—å“]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç‰©å“1] [ç‰©å“2] [ç‰©å“3] [ç‰©å“4]     â”‚
â”‚  [ç‰©å“5] [ç‰©å“6] [ç‰©å“7] [ç‰©å“8]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç‰©å“è¯¦æƒ…ï¼š                           â”‚
â”‚  åç§°ï¼šé“å‰‘                          â”‚
â”‚  å“è´¨ï¼šä¼˜ç§€                          â”‚
â”‚  æ”»å‡»åŠ›ï¼š+20                        â”‚
â”‚  ä»·æ ¼ï¼š100é‡‘å¸                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æˆ‘çš„é‡‘å¸ï¼š500                       â”‚
â”‚  [è´­ä¹°]  [è¿”å›]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å•†åº—æ•°æ®ç»“æ„

```csharp
public class ShopData
{
    public int ShopId;               // å•†åº—ID
    public string ShopName;          // å•†åº—åç§°
    public List<ShopItem> Items;    // å•†å“åˆ—è¡¨
    public ShopType Type;            // å•†åº—ç±»å‹
}

public class ShopItem
{
    public int ItemId;               // ç‰©å“ID
    public string ItemName;          // ç‰©å“åç§°
    public int Price;                // ä»·æ ¼
    public int Stock;                // åº“å­˜ï¼ˆ-1è¡¨ç¤ºæ— é™ï¼‰
    public ItemQuality Quality;      // å“è´¨
}
```

---

## ğŸ¨ åŸé•‡åœºæ™¯è®¾è®¡

### åœºæ™¯å…ƒç´ 

#### 1. åœ°å½¢
- **åœ°é¢ï¼š** çŸ³æ¿è·¯ã€è‰åœ°
- **å»ºç­‘ï¼š** 6ä¸ªä¸»è¦å»ºç­‘
- **è£…é¥°ï¼š** æ ‘æœ¨ã€è·¯ç¯ã€å–·æ³‰

#### 2. å…‰ç…§
- **ä¸»å…‰æºï¼š** æ–¹å‘å…‰ï¼ˆæ¨¡æ‹Ÿå¤ªé˜³ï¼‰
- **ç‚¹å…‰æºï¼š** è·¯ç¯ã€å»ºç­‘å†…ç¯å…‰
- **æ°›å›´ï¼š** æ¸©æš–çš„åŸé•‡æ°›å›´

#### 3. ç‰¹æ•ˆ
- **ä¼ é€é—¨ç‰¹æ•ˆï¼š** é­”æ³•ä¼ é€é—¨ç‰¹æ•ˆ
- **NPCç‰¹æ•ˆï¼š** NPCå¤´é¡¶æ ‡è¯†
- **äº¤äº’æç¤ºï¼š** æŒ‰Eé”®æç¤º

### åœºæ™¯èµ„æº
- **å»ºç­‘æ¨¡å‹ï¼š** 6ä¸ªå»ºç­‘æ¨¡å‹
- **NPCæ¨¡å‹ï¼š** 8-10ä¸ªNPCæ¨¡å‹
- **ç¯å¢ƒæ¨¡å‹ï¼š** æ ‘æœ¨ã€è·¯ç¯ç­‰
- **ç‰¹æ•ˆï¼š** ä¼ é€é—¨ç‰¹æ•ˆã€äº¤äº’ç‰¹æ•ˆ

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. NPCç³»ç»Ÿå®ç°

```csharp
public class NPCController : MonoBehaviour
{
    public NPCData npcData;
    public GameObject interactionHint;
    
    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("Player"))
        {
            ShowInteractionHint();
        }
    }
    
    private void OnTriggerExit(Collider other)
    {
        if (other.CompareTag("Player"))
        {
            HideInteractionHint();
        }
    }
    
    public void Interact()
    {
        // æ‰“å¼€å¯¹è¯UI
        UIManager.Instance.ShowDialogue(npcData);
    }
}
```

### 2. ä¼ é€é—¨ç³»ç»Ÿå®ç°

```csharp
public class PortalController : MonoBehaviour
{
    public PortalData portalData;
    
    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("Player"))
        {
            ShowInteractionHint();
        }
    }
    
    public void Interact()
    {
        // æ‰“å¼€å‰¯æœ¬é€‰æ‹©UI
        UIManager.Instance.ShowDungeonSelection(portalData);
    }
    
    public void EnterDungeon(DungeonInfo dungeon)
    {
        // åŠ è½½å‰¯æœ¬åœºæ™¯
        SceneManager.Instance.LoadScene(dungeon.SceneName);
    }
}
```

### 3. å¯¹è¯ç³»ç»Ÿå®ç°

```csharp
public class DialogueManager : MonoBehaviour
{
    public static DialogueManager Instance;
    
    public void ShowDialogue(NPCData npc)
    {
        // æ˜¾ç¤ºå¯¹è¯UI
        UIManager.Instance.ShowDialogueUI(npc);
    }
    
    public void OnDialogueOptionSelected(DialogueOption option)
    {
        // æ‰§è¡Œå¯¹è¯åŠ¨ä½œ
        switch (option.Action)
        {
            case DialogueAction.OpenShop:
                UIManager.Instance.ShowShop(npc.ShopData);
                break;
            case DialogueAction.OpenSkillTree:
                UIManager.Instance.ShowSkillTree();
                break;
            // ... å…¶ä»–åŠ¨ä½œ
        }
    }
}
```

---

## ğŸ“Š å¼€å‘ä»»åŠ¡

### Week 1: åŸé•‡ç³»ç»ŸåŸºç¡€
- [ ] åˆ›å»ºåŸé•‡åœºæ™¯
- [ ] å®ç°NPCç³»ç»Ÿ
- [ ] å®ç°å¯¹è¯ç³»ç»Ÿ
- [ ] å®ç°åŸºç¡€UI

### Week 2: ä¼ é€é—¨ç³»ç»Ÿ
- [ ] å®ç°ä¼ é€é—¨
- [ ] å®ç°å‰¯æœ¬é€‰æ‹©UI
- [ ] å®ç°åœºæ™¯åˆ‡æ¢
- [ ] å®ç°åŠ è½½ç•Œé¢

### Week 3: å•†åº—ç³»ç»Ÿ
- [ ] å®ç°è£…å¤‡å•†åº—
- [ ] å®ç°å•†åº—UI
- [ ] å®ç°è´­ä¹°/å‡ºå”®é€»è¾‘

### Week 4: ç³»ç»Ÿæ•´åˆ
- [ ] æ•´åˆæ‰€æœ‰ç³»ç»Ÿ
- [ ] æµ‹è¯•å®Œæ•´æµç¨‹
- [ ] ä¿®å¤Bug

---

## ğŸ¯ æ€»ç»“

åŸé•‡ç³»ç»Ÿè®¾è®¡è¦ç‚¹ï¼š
1. **NPCç³»ç»Ÿ** - 6ä¸ªNPCï¼Œä¸åŒåŠŸèƒ½
2. **å¯¹è¯ç³»ç»Ÿ** - å¯¹è¯UIã€é€‰é¡¹ç³»ç»Ÿ
3. **ä¼ é€é—¨ç³»ç»Ÿ** - å‰¯æœ¬é€‰æ‹©ã€åœºæ™¯åˆ‡æ¢
4. **å•†åº—ç³»ç»Ÿ** - è´­ä¹°ã€å‡ºå”®è£…å¤‡
5. **åœºæ™¯è®¾è®¡** - åŸé•‡å¸ƒå±€ã€å»ºç­‘ã€è£…é¥°

è¿™ä¸ªç³»ç»Ÿå¯ä»¥å¾ˆå¥½åœ°å±•ç¤ºï¼š
- âœ… NPCç³»ç»Ÿè®¾è®¡
- âœ… UIç³»ç»Ÿè®¾è®¡
- âœ… åœºæ™¯ç®¡ç†
- âœ… äº¤äº’ç³»ç»Ÿ

